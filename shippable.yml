language: node_js
node_js:
  - "6.10.0"
env:
  - XUNIT_FILE=shippable/testresults/result.xml LOG_XUNIT=true
build:
  cache: true
  cache_dir_list:
    - $SHIPPABLE_BUILD_DIR/node_modules
  pre_ci_boot:
    image_name: drydock/u16nodall
    image_tag: v5.3.2
  ci:
    # Install build deps
    #- npm install -g gulp mocha
    - shippable_retry npm install
    # setup dir
    - mkdir -p shippable/testresults
    - mkdir -p shippable/coverage
    # Run tests
    - npm run test
    - npm run e2e
branches:
  only:
  - master
